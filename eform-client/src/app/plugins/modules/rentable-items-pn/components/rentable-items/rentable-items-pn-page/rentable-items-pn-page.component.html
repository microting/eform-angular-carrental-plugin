<subheader-pn>
  <div class="p-3">
    <button
      mdbBtn
    id="emailRetrieveBtn"
    class="btn-success btn-small-height"
    (click)="getEmail()"
    >
    {{'Get email' | translate}}
    </button>
    <button *ngIf="pluginClaimsHelper.check(rentableItemsPnClaims.createRentableItems)"
      id="rentableItemCreateBtn"
      mdbBtn
      class="btn-success btn-small-height"
      mdbTooltip="{{ 'Create rentable item' | translate }}"
      (click)="showCreateRentableItemModal()">{{ 'New rentable item' | translate }}
    </button>
  </div>
</subheader-pn>

<div class="container-fluid">
  <div class="row pl-1">
    <div class="col-md-2">
      <div class="md-form">
        <input mdbInput
               type="text" (input)="onSearchInputChanged($event.target.value)"
               class="form-control input-sm" id="searchInput">
        <label for="searchInput">{{'Search' | translate}}</label>
      </div>
    </div>
  </div>
  <div class="container-fluid">
    <div class="row p-1 mt-4 table-responsive no-gutters">
      <table mdbTable striped="true" hover="true" small="true" class="z-depth-1 text-center">
        <thead>
        <tr>
          <th scope="col" class="table-header-sortable" id="idSort"
              (click)="sortByColumn('Id', rentableItemsRequestModel.isSortDsc = !rentableItemsRequestModel.isSortDsc)">
            <div class="d-flex align-items-center justify-content-center">
              ID
              <i class="material-icons text-black-50"
                 *ngIf="rentableItemsRequestModel.sort != 'Id'">unfold_more</i>
              <i class="material-icons"
                 *ngIf="rentableItemsRequestModel.sort == 'Id' && !rentableItemsRequestModel.isSortDsc">
                expand_less</i>
              <i class="material-icons"
                 *ngIf="rentableItemsRequestModel.sort == 'Id' && rentableItemsRequestModel.isSortDsc">expand_more</i>
            </div>
          </th>
          <th scope="col" class="table-header-sortable" id="brandSort"
              (click)="sortByColumn('Brand', rentableItemsRequestModel.isSortDsc = !rentableItemsRequestModel.isSortDsc)">
            <div class="d-flex align-items-center justify-content-center">
              {{ 'Brand' | translate }}
              <i class="material-icons text-black-50" *ngIf="rentableItemsRequestModel.sort != 'Brand'">unfold_more</i>
              <i class="material-icons"
                 *ngIf="rentableItemsRequestModel.sort == 'Brand' && !rentableItemsRequestModel.isSortDsc">
                expand_less</i>
              <i class="material-icons"
                 *ngIf="rentableItemsRequestModel.sort == 'Brand' && rentableItemsRequestModel.isSortDsc">expand_more</i>
            </div>
          </th>
          <th scope="col" class="table-header-sortable" id="modelSort"
              (click)="sortByColumn('ModelName', rentableItemsRequestModel.isSortDsc = !rentableItemsRequestModel.isSortDsc)">
            <div class="d-flex align-items-center justify-content-center">
              {{ 'Model' | translate }}
              <i class="material-icons text-black-50" *ngIf="rentableItemsRequestModel.sort != 'ModelName'">unfold_more</i>
              <i class="material-icons"
                 *ngIf="rentableItemsRequestModel.sort == 'ModelName' && !rentableItemsRequestModel.isSortDsc">
                expand_less</i>
              <i class="material-icons"
                 *ngIf="rentableItemsRequestModel.sort == 'ModelName' && rentableItemsRequestModel.isSortDsc">expand_more</i>
            </div>
          </th>
          <th scope="col" class="table-header-sortable" id="registerDateSort"
              (click)="sortByColumn('RegistrationDate', rentableItemsRequestModel.isSortDsc = !rentableItemsRequestModel.isSortDsc)">
            <div class="d-flex align-items-center justify-content-center">
              {{ 'Registration Date' | translate }}
              <i class="material-icons text-black-50" *ngIf="rentableItemsRequestModel.sort != 'RegistrationDate'">unfold_more</i>
              <i class="material-icons"
                 *ngIf="rentableItemsRequestModel.sort == 'RegistrationDate' && !rentableItemsRequestModel.isSortDsc">
                expand_less</i>
              <i class="material-icons"
                 *ngIf="rentableItemsRequestModel.sort == 'RegistrationDate' && rentableItemsRequestModel.isSortDsc">expand_more</i>
            </div>
          </th>
          <th scope="col" class="table-header-sortable" id="vinNumberSort"
              (click)="sortByColumn('VinNumber', rentableItemsRequestModel.isSortDsc = !rentableItemsRequestModel.isSortDsc)">
            <div class="d-flex align-items-center justify-content-center">
              {{ 'Vin Number' | translate }}
              <i class="material-icons text-black-50" *ngIf="rentableItemsRequestModel.sort != 'VinNumber'">unfold_more</i>
              <i class="material-icons"
                 *ngIf="rentableItemsRequestModel.sort == 'VinNumber' && !rentableItemsRequestModel.isSortDsc">
                expand_less</i>
              <i class="material-icons"
                 *ngIf="rentableItemsRequestModel.sort == 'VinNumber' && rentableItemsRequestModel.isSortDsc">expand_more</i>
            </div>
          </th>
          <th scope="col" class="table-header-sortable" id="serialNumberSort"
              (click)="sortByColumn('SerialNumber', rentableItemsRequestModel.isSortDsc = !rentableItemsRequestModel.isSortDsc)">
            <div class="d-flex align-items-center justify-content-center">
              {{ 'Serial Number' | translate }}
              <i class="material-icons text-black-50" *ngIf="rentableItemsRequestModel.sort != 'SerialNumber'">unfold_more</i>
              <i class="material-icons"
                 *ngIf="rentableItemsRequestModel.sort == 'SerialNumber' && !rentableItemsRequestModel.isSortDsc">
                expand_less</i>
              <i class="material-icons"
                 *ngIf="rentableItemsRequestModel.sort == 'SerialNumber' && rentableItemsRequestModel.isSortDsc">expand_more</i>
            </div>
          </th>
          <th scope="col" class="table-header-sortable" id="plateNumberSort"
              (click)="sortByColumn('PlateNumber', rentableItemsRequestModel.isSortDsc = !rentableItemsRequestModel.isSortDsc)">
            <div class="d-flex align-items-center justify-content-center">
              {{ 'Plate Number' | translate }}
              <i class="material-icons text-black-50" *ngIf="rentableItemsRequestModel.sort != 'PlateNumber'">unfold_more</i>
              <i class="material-icons"
                 *ngIf="rentableItemsRequestModel.sort == 'PlateNumber' && !rentableItemsRequestModel.isSortDsc">
                expand_less</i>
              <i class="material-icons"
                 *ngIf="rentableItemsRequestModel.sort == 'PlateNumber' && rentableItemsRequestModel.isSortDsc">expand_more</i>
            </div>
          </th>
          <th scope="col">
            {{ 'Actions' | translate }}
          </th>
        </tr>
        </thead>
        <tbody id="tableBody">
        <tr *ngFor="let rentableItem of rentableItemsModel?.rentableItems">
          <td id="rentableItemId">
            {{rentableItem.id}}
          </td>
          <td id="rentableItemBrand">
            {{rentableItem.brand}}
          </td>
          <td id="rentableItemModel">
            {{rentableItem.modelName}}
          </td>
          <td id="rentableItemRegistrationDate">
            {{rentableItem.registrationDate | date:'dd/MM/yyyy'}}
          </td>
          <td id="rentableItemVINNumber">
            {{rentableItem.vinNumber}}
          </td>
          <td id="rentableItemSerialNumber">
            {{rentableItem.serialNumber}}
          </td>
          <td id="rentableItemPlateNumber">
            {{rentableItem.plateNumber}}
          </td>
          <td>
            <div class="d-flex flex-row justify-content-center">
              <button mdbBtn class="btn-accent text-black-50 btn-icon mb-2"
                      mdbTooltip="{{ 'Edit rentable item' | translate }}"
                      id="rentableItemEditBtn"
                      (click)="showEditRentableItemModal(rentableItem)">
                <fa-icon icon="pen" [fixedWidth]="true" size="lg"></fa-icon>
              </button>
              <button mdbBtn class="btn-danger btn-icon mb-2"
                      mdbTooltip="{{'Delete rentable Item ' | translate}}"
                      id="rentableItemDeleteBtn"
                      (click)="showDeleteRentableItemModal(rentableItem)" >
                <fa-icon icon="trash-alt" [fixedWidth]="true" size="lg"></fa-icon>
              </button>
            </div>
          </td>
        </tr>
        </tbody>
      </table>
    </div>
  </div>
  <div class="row justify-content-between mr-2 ml-2">

  <div class="col-md-1">
    <page-size-pn
      [pageSize]="localPageSettings.pageSize"
      (onPageSizeChanged)="localPageSettings.pageSize = $event; rentableItemsRequestModel.pageIndex = 1;
        updateLocalPageSettings()">
    </page-size-pn>
  </div>
  <pagination-pn *ngIf="rentableItemsModel?.total > rentableItemsRequestModel.pageSize"
                 [limit]="rentableItemsRequestModel.pageSize"
                 [size]="rentableItemsModel.total"
                 [offset]="rentableItemsRequestModel.offset"
                 (onPageChanged)="changePage($event)"></pagination-pn>
  </div>
</div>

<app-rentable-items-pn-add #createRentableItemModal
                           (onRentableItemCreated)="getAllRentableItems()"></app-rentable-items-pn-add>
<app-rentable-items-pn-update #editRentableItemModal
                              (onRentableItemUpdated)="getAllRentableItems()"></app-rentable-items-pn-update>
<app-rentable-items-pn-delete #deleteRentableItemModal
                              (onRentableItemDeleted)="getAllRentableItems()"></app-rentable-items-pn-delete>
